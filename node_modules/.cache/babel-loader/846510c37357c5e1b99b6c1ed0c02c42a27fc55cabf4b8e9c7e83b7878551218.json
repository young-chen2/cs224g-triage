{"ast":null,"code":"import { parseDef } from \"../parseDef.mjs\";\nexport const parsePipelineDef = (def, refs) => {\n  if (refs.pipeStrategy === 'input') {\n    return parseDef(def.in._def, refs);\n  } else if (refs.pipeStrategy === 'output') {\n    return parseDef(def.out._def, refs);\n  }\n  const a = parseDef(def.in._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', '0']\n  });\n  const b = parseDef(def.out._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', a ? '1' : '0']\n  });\n  return {\n    allOf: [a, b].filter(x => x !== undefined)\n  };\n};","map":{"version":3,"names":["parseDef","parsePipelineDef","def","refs","pipeStrategy","in","_def","out","a","currentPath","b","allOf","filter","x","undefined"],"sources":["/Users/youngchen/Downloads/cs224g-triage/node_modules/openai/src/_vendor/zod-to-json-schema/parsers/pipeline.ts"],"sourcesContent":["import { ZodPipelineDef } from 'zod';\nimport { JsonSchema7Type, parseDef } from '../parseDef';\nimport { Refs } from '../Refs';\nimport { JsonSchema7AllOfType } from './intersection';\n\nexport const parsePipelineDef = (\n  def: ZodPipelineDef<any, any>,\n  refs: Refs,\n): JsonSchema7AllOfType | JsonSchema7Type | undefined => {\n  if (refs.pipeStrategy === 'input') {\n    return parseDef(def.in._def, refs);\n  } else if (refs.pipeStrategy === 'output') {\n    return parseDef(def.out._def, refs);\n  }\n\n  const a = parseDef(def.in._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', '0'],\n  });\n  const b = parseDef(def.out._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', a ? '1' : '0'],\n  });\n\n  return {\n    allOf: [a, b].filter((x): x is JsonSchema7Type => x !== undefined),\n  };\n};\n"],"mappings":"SAC0BA,QAAQ,QAAE;AAIpC,OAAO,MAAMC,gBAAgB,GAAGA,CAC9BC,GAA6B,EAC7BC,IAAU,KAC4C;EACtD,IAAIA,IAAI,CAACC,YAAY,KAAK,OAAO,EAAE;IACjC,OAAOJ,QAAQ,CAACE,GAAG,CAACG,EAAE,CAACC,IAAI,EAAEH,IAAI,CAAC;GACnC,MAAM,IAAIA,IAAI,CAACC,YAAY,KAAK,QAAQ,EAAE;IACzC,OAAOJ,QAAQ,CAACE,GAAG,CAACK,GAAG,CAACD,IAAI,EAAEH,IAAI,CAAC;;EAGrC,MAAMK,CAAC,GAAGR,QAAQ,CAACE,GAAG,CAACG,EAAE,CAACC,IAAI,EAAE;IAC9B,GAAGH,IAAI;IACPM,WAAW,EAAE,CAAC,GAAGN,IAAI,CAACM,WAAW,EAAE,OAAO,EAAE,GAAG;GAChD,CAAC;EACF,MAAMC,CAAC,GAAGV,QAAQ,CAACE,GAAG,CAACK,GAAG,CAACD,IAAI,EAAE;IAC/B,GAAGH,IAAI;IACPM,WAAW,EAAE,CAAC,GAAGN,IAAI,CAACM,WAAW,EAAE,OAAO,EAAED,CAAC,GAAG,GAAG,GAAG,GAAG;GAC1D,CAAC;EAEF,OAAO;IACLG,KAAK,EAAE,CAACH,CAAC,EAAEE,CAAC,CAAC,CAACE,MAAM,CAAEC,CAAC,IAA2BA,CAAC,KAAKC,SAAS;GAClE;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}