{"ast":null,"code":"import { ChatPromptTemplate } from \"./chat.js\";\nfunction isWithStructuredOutput(x\n// eslint-disable-next-line @typescript-eslint/ban-types\n) {\n  return typeof x === \"object\" && x != null && \"withStructuredOutput\" in x && typeof x.withStructuredOutput === \"function\";\n}\nfunction isRunnableBinding(x) {\n  return typeof x === \"object\" && x != null && \"lc_id\" in x && Array.isArray(x.lc_id) && x.lc_id.join(\"/\") === \"langchain_core/runnables/RunnableBinding\";\n}\nexport class StructuredPrompt extends ChatPromptTemplate {\n  get lc_aliases() {\n    return {\n      ...super.lc_aliases,\n      schema: \"schema_\"\n    };\n  }\n  constructor(input) {\n    super(input);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Object.defineProperty(this, \"schema\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain_core\", \"prompts\", \"structured\"]\n    });\n    this.schema = input.schema;\n  }\n  pipe(coerceable) {\n    if (isWithStructuredOutput(coerceable)) {\n      return super.pipe(coerceable.withStructuredOutput(this.schema));\n    }\n    if (isRunnableBinding(coerceable) && isWithStructuredOutput(coerceable.bound)) {\n      return super.pipe(coerceable.bound.withStructuredOutput(this.schema).bind(coerceable.kwargs ?? {}).withConfig(coerceable.config));\n    }\n    throw new Error(`Structured prompts need to be piped to a language model that supports the \"withStructuredOutput()\" method.`);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static fromMessagesAndSchema(promptMessages, schema\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ) {\n    return StructuredPrompt.fromMessages(promptMessages, {\n      schema\n    });\n  }\n}","map":{"version":3,"names":["ChatPromptTemplate","isWithStructuredOutput","x","withStructuredOutput","isRunnableBinding","Array","isArray","lc_id","join","StructuredPrompt","lc_aliases","schema","constructor","input","Object","defineProperty","enumerable","configurable","writable","value","pipe","coerceable","bound","bind","kwargs","withConfig","config","Error","fromMessagesAndSchema","promptMessages","fromMessages"],"sources":["/Users/youngchen/Downloads/cs224g-triage/node_modules/@langchain/core/dist/prompts/structured.js"],"sourcesContent":["import { ChatPromptTemplate, } from \"./chat.js\";\nfunction isWithStructuredOutput(x\n// eslint-disable-next-line @typescript-eslint/ban-types\n) {\n    return (typeof x === \"object\" &&\n        x != null &&\n        \"withStructuredOutput\" in x &&\n        typeof x.withStructuredOutput === \"function\");\n}\nfunction isRunnableBinding(x) {\n    return (typeof x === \"object\" &&\n        x != null &&\n        \"lc_id\" in x &&\n        Array.isArray(x.lc_id) &&\n        x.lc_id.join(\"/\") === \"langchain_core/runnables/RunnableBinding\");\n}\nexport class StructuredPrompt extends ChatPromptTemplate {\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            schema: \"schema_\",\n        };\n    }\n    constructor(input) {\n        super(input);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"prompts\", \"structured\"]\n        });\n        this.schema = input.schema;\n    }\n    pipe(coerceable) {\n        if (isWithStructuredOutput(coerceable)) {\n            return super.pipe(coerceable.withStructuredOutput(this.schema));\n        }\n        if (isRunnableBinding(coerceable) &&\n            isWithStructuredOutput(coerceable.bound)) {\n            return super.pipe(coerceable.bound\n                .withStructuredOutput(this.schema)\n                .bind(coerceable.kwargs ?? {})\n                .withConfig(coerceable.config));\n        }\n        throw new Error(`Structured prompts need to be piped to a language model that supports the \"withStructuredOutput()\" method.`);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromMessagesAndSchema(promptMessages, schema\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        return StructuredPrompt.fromMessages(promptMessages, { schema });\n    }\n}\n"],"mappings":"AAAA,SAASA,kBAAkB,QAAS,WAAW;AAC/C,SAASC,sBAAsBA,CAACC;AAChC;AAAA,EACE;EACE,OAAQ,OAAOA,CAAC,KAAK,QAAQ,IACzBA,CAAC,IAAI,IAAI,IACT,sBAAsB,IAAIA,CAAC,IAC3B,OAAOA,CAAC,CAACC,oBAAoB,KAAK,UAAU;AACpD;AACA,SAASC,iBAAiBA,CAACF,CAAC,EAAE;EAC1B,OAAQ,OAAOA,CAAC,KAAK,QAAQ,IACzBA,CAAC,IAAI,IAAI,IACT,OAAO,IAAIA,CAAC,IACZG,KAAK,CAACC,OAAO,CAACJ,CAAC,CAACK,KAAK,CAAC,IACtBL,CAAC,CAACK,KAAK,CAACC,IAAI,CAAC,GAAG,CAAC,KAAK,0CAA0C;AACxE;AACA,OAAO,MAAMC,gBAAgB,SAAST,kBAAkB,CAAC;EACrD,IAAIU,UAAUA,CAAA,EAAG;IACb,OAAO;MACH,GAAG,KAAK,CAACA,UAAU;MACnBC,MAAM,EAAE;IACZ,CAAC;EACL;EACAC,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IACZ;IACAC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE;MAClCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFL,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MACxCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,CAAC,gBAAgB,EAAE,SAAS,EAAE,YAAY;IACrD,CAAC,CAAC;IACF,IAAI,CAACR,MAAM,GAAGE,KAAK,CAACF,MAAM;EAC9B;EACAS,IAAIA,CAACC,UAAU,EAAE;IACb,IAAIpB,sBAAsB,CAACoB,UAAU,CAAC,EAAE;MACpC,OAAO,KAAK,CAACD,IAAI,CAACC,UAAU,CAAClB,oBAAoB,CAAC,IAAI,CAACQ,MAAM,CAAC,CAAC;IACnE;IACA,IAAIP,iBAAiB,CAACiB,UAAU,CAAC,IAC7BpB,sBAAsB,CAACoB,UAAU,CAACC,KAAK,CAAC,EAAE;MAC1C,OAAO,KAAK,CAACF,IAAI,CAACC,UAAU,CAACC,KAAK,CAC7BnB,oBAAoB,CAAC,IAAI,CAACQ,MAAM,CAAC,CACjCY,IAAI,CAACF,UAAU,CAACG,MAAM,IAAI,CAAC,CAAC,CAAC,CAC7BC,UAAU,CAACJ,UAAU,CAACK,MAAM,CAAC,CAAC;IACvC;IACA,MAAM,IAAIC,KAAK,CAAC,4GAA4G,CAAC;EACjI;EACA;EACA,OAAOC,qBAAqBA,CAACC,cAAc,EAAElB;EAC7C;EAAA,EACE;IACE,OAAOF,gBAAgB,CAACqB,YAAY,CAACD,cAAc,EAAE;MAAElB;IAAO,CAAC,CAAC;EACpE;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}