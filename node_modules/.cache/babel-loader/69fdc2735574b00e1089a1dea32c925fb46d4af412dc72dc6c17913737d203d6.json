{"ast":null,"code":"// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\nimport { Runnable } from \"../runnables/base.js\";\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */\nexport class BasePromptTemplate extends Runnable {\n  get lc_attributes() {\n    return {\n      partialVariables: undefined // python doesn't support this yet\n    };\n  }\n  constructor(input) {\n    super(input);\n    Object.defineProperty(this, \"lc_serializable\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain_core\", \"prompts\", this._getPromptType()]\n    });\n    Object.defineProperty(this, \"inputVariables\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"outputParser\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"partialVariables\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\n     * Metadata to be used for tracing.\n     */\n    Object.defineProperty(this, \"metadata\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /** Tags to be used for tracing. */\n    Object.defineProperty(this, \"tags\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    const {\n      inputVariables\n    } = input;\n    if (inputVariables.includes(\"stop\")) {\n      throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n    }\n    Object.assign(this, input);\n  }\n  /**\n   * Merges partial variables and user variables.\n   * @param userVariables The user variables to merge with the partial variables.\n   * @returns A Promise that resolves to an object containing the merged variables.\n   */\n  async mergePartialAndUserVariables(userVariables) {\n    const partialVariables = this.partialVariables ?? {};\n    const partialValues = {};\n    for (const [key, value] of Object.entries(partialVariables)) {\n      if (typeof value === \"string\") {\n        partialValues[key] = value;\n      } else {\n        partialValues[key] = await value();\n      }\n    }\n    const allKwargs = {\n      ...partialValues,\n      ...userVariables\n    };\n    return allKwargs;\n  }\n  /**\n   * Invokes the prompt template with the given input and options.\n   * @param input The input to invoke the prompt template with.\n   * @param options Optional configuration for the callback.\n   * @returns A Promise that resolves to the output of the prompt template.\n   */\n  async invoke(input, options) {\n    const metadata = {\n      ...this.metadata,\n      ...options?.metadata\n    };\n    const tags = [...(this.tags ?? []), ...(options?.tags ?? [])];\n    return this._callWithConfig(input => this.formatPromptValue(input), input, {\n      ...options,\n      tags,\n      metadata,\n      runType: \"prompt\"\n    });\n  }\n  /**\n   * Return a json-like object representing this prompt template.\n   * @deprecated\n   */\n  serialize() {\n    throw new Error(\"Use .toJSON() instead\");\n  }\n  /**\n   * @deprecated\n   * Load a prompt template from a json-like object describing it.\n   *\n   * @remarks\n   * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n   * reference remote resources that we read asynchronously with a web\n   * request.\n   */\n  static async deserialize(data) {\n    switch (data._type) {\n      case \"prompt\":\n        {\n          const {\n            PromptTemplate\n          } = await import(\"./prompt.js\");\n          return PromptTemplate.deserialize(data);\n        }\n      case undefined:\n        {\n          const {\n            PromptTemplate\n          } = await import(\"./prompt.js\");\n          return PromptTemplate.deserialize({\n            ...data,\n            _type: \"prompt\"\n          });\n        }\n      case \"few_shot\":\n        {\n          const {\n            FewShotPromptTemplate\n          } = await import(\"./few_shot.js\");\n          return FewShotPromptTemplate.deserialize(data);\n        }\n      default:\n        throw new Error(`Invalid prompt type in config: ${data._type}`);\n    }\n  }\n}","map":{"version":3,"names":["Runnable","BasePromptTemplate","lc_attributes","partialVariables","undefined","constructor","input","Object","defineProperty","enumerable","configurable","writable","value","_getPromptType","inputVariables","includes","Error","assign","mergePartialAndUserVariables","userVariables","partialValues","key","entries","allKwargs","invoke","options","metadata","tags","_callWithConfig","formatPromptValue","runType","serialize","deserialize","data","_type","PromptTemplate","FewShotPromptTemplate"],"sources":["/Users/youngchen/Downloads/cs224g-triage/node_modules/@langchain/core/dist/prompts/base.js"],"sourcesContent":["// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\nimport { Runnable } from \"../runnables/base.js\";\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */\nexport class BasePromptTemplate extends Runnable {\n    get lc_attributes() {\n        return {\n            partialVariables: undefined, // python doesn't support this yet\n        };\n    }\n    constructor(input) {\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"prompts\", this._getPromptType()]\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"partialVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Metadata to be used for tracing.\n         */\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Tags to be used for tracing. */\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { inputVariables } = input;\n        if (inputVariables.includes(\"stop\")) {\n            throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n        }\n        Object.assign(this, input);\n    }\n    /**\n     * Merges partial variables and user variables.\n     * @param userVariables The user variables to merge with the partial variables.\n     * @returns A Promise that resolves to an object containing the merged variables.\n     */\n    async mergePartialAndUserVariables(userVariables) {\n        const partialVariables = this.partialVariables ?? {};\n        const partialValues = {};\n        for (const [key, value] of Object.entries(partialVariables)) {\n            if (typeof value === \"string\") {\n                partialValues[key] = value;\n            }\n            else {\n                partialValues[key] = await value();\n            }\n        }\n        const allKwargs = {\n            ...partialValues,\n            ...userVariables,\n        };\n        return allKwargs;\n    }\n    /**\n     * Invokes the prompt template with the given input and options.\n     * @param input The input to invoke the prompt template with.\n     * @param options Optional configuration for the callback.\n     * @returns A Promise that resolves to the output of the prompt template.\n     */\n    async invoke(input, options) {\n        const metadata = {\n            ...this.metadata,\n            ...options?.metadata,\n        };\n        const tags = [...(this.tags ?? []), ...(options?.tags ?? [])];\n        return this._callWithConfig((input) => this.formatPromptValue(input), input, { ...options, tags, metadata, runType: \"prompt\" });\n    }\n    /**\n     * Return a json-like object representing this prompt template.\n     * @deprecated\n     */\n    serialize() {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n    /**\n     * @deprecated\n     * Load a prompt template from a json-like object describing it.\n     *\n     * @remarks\n     * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n     * reference remote resources that we read asynchronously with a web\n     * request.\n     */\n    static async deserialize(data) {\n        switch (data._type) {\n            case \"prompt\": {\n                const { PromptTemplate } = await import(\"./prompt.js\");\n                return PromptTemplate.deserialize(data);\n            }\n            case undefined: {\n                const { PromptTemplate } = await import(\"./prompt.js\");\n                return PromptTemplate.deserialize({ ...data, _type: \"prompt\" });\n            }\n            case \"few_shot\": {\n                const { FewShotPromptTemplate } = await import(\"./few_shot.js\");\n                return FewShotPromptTemplate.deserialize(data);\n            }\n            default:\n                throw new Error(`Invalid prompt type in config: ${data._type}`);\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}