{"ast":null,"code":"export async function raceWithSignal(promise, signal) {\n  if (signal === undefined) {\n    return promise;\n  }\n  let listener;\n  return Promise.race([promise.catch(err => {\n    if (!signal?.aborted) {\n      throw err;\n    } else {\n      return undefined;\n    }\n  }), new Promise((_, reject) => {\n    listener = () => {\n      reject(new Error(\"Aborted\"));\n    };\n    signal.addEventListener(\"abort\", listener);\n    // Must be here inside the promise to avoid a race condition\n    if (signal.aborted) {\n      reject(new Error(\"Aborted\"));\n    }\n  })]).finally(() => signal.removeEventListener(\"abort\", listener));\n}","map":{"version":3,"names":["raceWithSignal","promise","signal","undefined","listener","Promise","race","catch","err","aborted","_","reject","Error","addEventListener","finally","removeEventListener"],"sources":["/Users/youngchen/Downloads/cs224g-triage/node_modules/@langchain/core/dist/utils/signal.js"],"sourcesContent":["export async function raceWithSignal(promise, signal) {\n    if (signal === undefined) {\n        return promise;\n    }\n    let listener;\n    return Promise.race([\n        promise.catch((err) => {\n            if (!signal?.aborted) {\n                throw err;\n            }\n            else {\n                return undefined;\n            }\n        }),\n        new Promise((_, reject) => {\n            listener = () => {\n                reject(new Error(\"Aborted\"));\n            };\n            signal.addEventListener(\"abort\", listener);\n            // Must be here inside the promise to avoid a race condition\n            if (signal.aborted) {\n                reject(new Error(\"Aborted\"));\n            }\n        }),\n    ]).finally(() => signal.removeEventListener(\"abort\", listener));\n}\n"],"mappings":"AAAA,OAAO,eAAeA,cAAcA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAClD,IAAIA,MAAM,KAAKC,SAAS,EAAE;IACtB,OAAOF,OAAO;EAClB;EACA,IAAIG,QAAQ;EACZ,OAAOC,OAAO,CAACC,IAAI,CAAC,CAChBL,OAAO,CAACM,KAAK,CAAEC,GAAG,IAAK;IACnB,IAAI,CAACN,MAAM,EAAEO,OAAO,EAAE;MAClB,MAAMD,GAAG;IACb,CAAC,MACI;MACD,OAAOL,SAAS;IACpB;EACJ,CAAC,CAAC,EACF,IAAIE,OAAO,CAAC,CAACK,CAAC,EAAEC,MAAM,KAAK;IACvBP,QAAQ,GAAGA,CAAA,KAAM;MACbO,MAAM,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IACDV,MAAM,CAACW,gBAAgB,CAAC,OAAO,EAAET,QAAQ,CAAC;IAC1C;IACA,IAAIF,MAAM,CAACO,OAAO,EAAE;MAChBE,MAAM,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;IAChC;EACJ,CAAC,CAAC,CACL,CAAC,CAACE,OAAO,CAAC,MAAMZ,MAAM,CAACa,mBAAmB,CAAC,OAAO,EAAEX,QAAQ,CAAC,CAAC;AACnE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}